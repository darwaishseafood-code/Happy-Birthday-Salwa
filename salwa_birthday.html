<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Happy Birthday Salwa — From Daniyal</title>
  <style>
    :root{--bg:#0f0f10;--accent:#ff7fbf}
    html,body{height:100%;margin:0;background:linear-gradient(180deg,#0b0610 0%, #2b0b16 100%);font-family:system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial}
    .phone{width:360px;height:720px;margin:20px auto;border-radius:30px;box-shadow:0 10px 40px rgba(0,0,0,.6), inset 0 2px 10px rgba(255,255,255,.03);overflow:hidden;position:relative;background:#000}
    /* Make responsive: scale down on larger screens */
    @media(min-width:420px){.phone{transform:scale(1);}}
    .stage{width:100%;height:100%;position:relative;background:#000;display:flex;align-items:center;justify-content:center}
    .slide{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;opacity:0;transform:scale(1.02);transition:opacity .9s ease, transform .9s ease}
    .slide img{width:100%;height:100%;object-fit:cover}
    .slide.show{opacity:1;transform:scale(1)}
    /* romantic glow overlay */
    .overlay{position:absolute;inset:0;pointer-events:none;background:linear-gradient(180deg, rgba(255,200,220,.06), rgba(10,0,0,.18));mix-blend-mode:screen}
    .vignette{position:absolute;inset:0;box-shadow:inset 0 80px 120px rgba(0,0,0,.6);pointer-events:none}
    /* title */
    .title{position:absolute;top:28px;left:20px;right:20px;color:white;text-align:center;font-weight:700;letter-spacing:.6px;text-shadow:0 4px 18px rgba(0,0,0,.6);pointer-events:none}
    .title .main{font-size:22px}
    .title .sub{font-size:14px;opacity:.9;margin-top:6px}
    /* hearts animation */
    .hearts{position:absolute;inset:0;pointer-events:none;overflow:hidden}
    .heart{position:absolute;width:18px;height:18px;background:radial-gradient(circle at 30% 30%, #fff8 0,#fff0 40%, transparent 41%),linear-gradient(135deg,#ff7fbf,#ff4d94);transform:rotate(45deg);border-radius:4px;opacity:.9}
    /* controls */
    .controls{position:absolute;bottom:16px;left:16px;right:16px;display:flex;gap:10px;align-items:center;justify-content:center}
    .btn{background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.08);backdrop-filter: blur(6px);padding:10px 14px;border-radius:12px;color:#fff;font-weight:600}
    .small{padding:8px 10px;border-radius:10px;font-size:14px}
    .progress{position:absolute;bottom:66px;left:16px;right:16px;height:6px;background:rgba(255,255,255,.06);border-radius:6px;overflow:hidden}
    .progress > i{display:block;height:100%;width:0%;background:linear-gradient(90deg,#ff9ac2,#ff6fa6);transition:width .2s linear}
    /* instruction */
    .notes{font-size:12px;color:#ddd;text-align:center;padding:8px}
    /* hidden file list area */
    .filelist{display:none}
  </style>
</head>
<body>
    <h3 style="margin:8px 0 2px">Romantic Birthday Video — Mobile Preview</h3>
    </div>  <div class="phone" id="phone">
    <div class="stage" id="stage">
      <!-- Slides: replace image1.jpg, image2.jpg ... with your actual image filenames (put them in same folder as this HTML) -->
      <div class="slide show"><img src="IMG_20231106_161744.jpg" alt="img1"></div>
      <div class="slide"><img src="IMG-20220813-WA0035.jpg" alt="img2"></div>
      <div class="slide"><img src="IMG-20220813-WA0064.jpg" alt="img3"></div>
      <div class="slide"><img src="IMG-20220813-WA0149.jpg" alt="img4"></div>
      <div class="slide"><img src="IMG-20220813-WA0384.jpg" alt="img5"></div>
      <div class="slide"><img src="IMG-20220813-WA0385.jpg" alt="img6"></div>
      <div class="slide"><img src="IMG-20221101-WA0028.jpg" alt="img7"></div>
      <div class="slide"><img src="IMG-20221101-WA0029.jpg" alt="img8"></div>
      <div class="slide"><img src="IMG-20230108-WA0024.jpg" alt="img9"></div>
      <div class="slide"><img src="IMG-20230423-WA0045.jpg" alt="img10"></div>
      <div class="slide"><img src="IMG-20230629-WA0022.jpg" alt="img11"></div>
      <div class="slide"><img src="IMG-20230712-WA0116.jpg" alt="img12"></div>
      <div class="slide"><img src="IMG-20230827-WA0008.jpg" alt="img13"></div>
      <div class="slide"><img src="IMG-20231024-WA0045.jpg" alt="img14"></div>
      <div class="slide"><img src="IMG-20231027-WA0013.jpg" alt="img15"></div>
      <div class="slide"><img src="IMG-20231126-WA0063.jpg" alt="img16"></div>
      <div class="slide"><img src="IMG-20231220-WA0044.jpg" alt="img17"></div>
      <div class="slide"><img src="IMG-20231220-WA0053.jpg" alt="img18"></div>
      <div class="slide"><img src="IMG-20250227-WA7398.jpg" alt="img19"></div>
      <div class="slide"><img src="IMG-20250227-WA7401.jpg" alt="img20"></div>
      <div class="slide"><img src="IMG-20250227-WA7574.jpg" alt="img21"></div>
      <div class="slide"><img src="IMG-20250301-WA0388.jpg" alt="img22"></div>
      <div class="slide"><img src="IMG-20250301-WA0459.jpg" alt="img23"></div>
      <div class="slide"><img src="IMG-20250301-WA0662.jpg" alt="img24"></div>
      <div class="slide"><img src="IMG-20250301-WA0663.jpg" alt="img25"></div>
      <div class="slide"><img src="IMG-20250323-WA1506.jpg" alt="img26"></div>
      <div class="slide"><img src="IMG-20250323-WA1729.jpg" alt="img27"></div>
      <div class="slide"><img src="IMG-20250323-WA1973.jpg" alt="img28"></div>
      <div class="slide"><img src="Snapchat-1631464335.jpg" alt="img29"></div>
      <div class="slide"><img src="Snapchat-1617768194.jpg" alt="img30"></div>
      <div class="slide"><img src="Snapchat-1584219677.jpg" alt="img31"></div>
      <div class="slide"><img src="Snapchat-1583845509.jpg" alt="img32"></div>
      <div class="slide"><img src="Snapchat-1561542770.jpg" alt="img33"></div>
      <div class="slide"><img src="Snapchat-1417446621.jpg" alt="img34"></div>
      <div class="slide"><img src="Snapchat-1264442103.jpg" alt="img35"></div>
      <div class="slide"><img src="Snapchat-1238358965.jpg" alt="img36"></div>
      <div class="slide"><img src="Snapchat-1163382516.jpg" alt="img37"></div>
      <div class="slide"><img src="Snapchat-845702864.jpg" alt="img38"></div>
      <div class="slide"><img src="IMG-20250323-WA2978.jpg" alt="img39"></div>
      <div class="slide"><img src="IMG-20250323-WA1729.jpg" alt="img40"> </div><div class="overlay"></div>
  <div class="vignette"></div>

  <div class="title">
    <div class="main">𝓗𝓪𝓟𝓟𝔂 𝓑𝓲𝓡𝓽𝓱𝓓𝓪𝔂 𝓜𝓮𝓡𝓲 𝓙𝓪𝓪𝓪𝓝-𝓮-𝓙𝓪𝓗𝓪𝓷 ❤️</div>
  </div>

  <div class="hearts" id="hearts"></div>

  <audio id="bgAudio" src="Ranjheya_Ve___Zain_Zohaib___Yratta_media(256k).mp3" preload="auto"></audio>

  <div class="controls">
    <button class="btn small" id="playBtn">Play Preview</button>
    <button class="btn small" id="pauseBtn">Pause</button>
    <input id="fileInput" type="file" accept="image/*" multiple style="display:none">
  </div>

  <div class="progress"><i id="progBar"></i></div>
</div>

  </div>  <div style="max-width:420px;margin:8px auto;text-align:center;color:#fff;font-size:13px;">
  </div>  <script>
    // Simple slideshow controller
    const slides = Array.from(document.querySelectorAll('.slide'));
    const audio = document.getElementById('bgAudio');
    const playBtn = document.getElementById('playBtn');
    const pauseBtn = document.getElementById('pauseBtn');
    const exportBtn = document.getElementById('exportBtn');
    const progBar = document.getElementById('progBar');
    const fileInput = document.getElementById('fileInput');
    const hearts = document.getElementById('hearts');

    let idx = 0;
    let slideInterval = null;
    let slideDur = 4000; // default slide duration (ms) - will sync to song length

    // create subtle floating hearts
    function spawnHeart(){
      const h = document.createElement('div');
      h.className = 'heart';
      const size = 12 + Math.random()*30;
      h.style.width = size+'px'; h.style.height = size+'px';
      h.style.left = (10 + Math.random()*80)+'%';
      h.style.top = (60 + Math.random()*35)+'%';
      h.style.opacity = 0.9 - Math.random()*0.6;
      hearts.appendChild(h);
      const dur = 3000 + Math.random()*4000;
      h.animate([{transform:'translateY(0) rotate(45deg) scale(1)', opacity: h.style.opacity},{transform:'translateY(-200px) rotate(45deg) scale(.6)', opacity:0}],{duration:dur, easing:'linear'});
      setTimeout(()=>h.remove(), dur);
    }
    setInterval(spawnHeart, 600);

    function showSlide(i){
      slides.forEach((s,si)=> s.classList.toggle('show', si===i));
    }

    function startSlideshow(){
      if(!audio.duration || isNaN(audio.duration)){
        slideDur = 4000;
      } else {
        // divide song duration by number of slides to display full song length
        slideDur = Math.max(1500, (audio.duration*1000) / Math.max(1, slides.length));
      }
      clearInterval(slideInterval);
      slideInterval = setInterval(()=>{
        idx = (idx+1) % slides.length;
        showSlide(idx);
      }, slideDur);
    }

    playBtn.addEventListener('click', async ()=>{
      try{ await audio.play(); }catch(e){console.log('audio play blocked',e)}
      startSlideshow();
      requestAnimationFrame(updateProgress);
    });
    pauseBtn.addEventListener('click', ()=>{ audio.pause(); clearInterval(slideInterval); });

    // progress bar
    function updateProgress(){
      if(audio.duration && !isNaN(audio.duration)){
        const p = (audio.currentTime / audio.duration)*100;
        progBar.style.width = p+'%';
      }
      if(!audio.paused) requestAnimationFrame(updateProgress);
    }

    // allow user to replace images on the fly
    fileInput.addEventListener('change', (e)=>{
      const files = Array.from(e.target.files).slice(0, slides.length);
      files.forEach((f,i)=>{
        const url = URL.createObjectURL(f);
        slides[i].querySelector('img').src = url;
      });
    });

    // EXPORT: record the stage element + audio into a webm file using MediaRecorder
    exportBtn.addEventListener('click', async ()=>{
      // ensure audio is loaded
      if(!audio.duration || isNaN(audio.duration)){
        alert('Please Preview (Play Preview) first so audio duration is loaded.');
        return;
      }

      // prepare canvas capture
      const stage = document.getElementById('stage');
      const stream = stage.captureStream(30); // 30fps
      // combine with audio track
      const audioStream = audio.captureStream ? audio.captureStream() : audio.mozCaptureStream && audio.mozCaptureStream();
      if(audioStream){
        audioStream.getAudioTracks().forEach(t=>stream.addTrack(t));
      } else {
        alert('Your browser may not support automatic audio capture. Export may only include visual track.');
      }

      const mime = 'video/webm;codecs=vp8,opus';
      const recorder = new MediaRecorder(stream, {mimeType:mime});
      const chunks = [];
      recorder.ondataavailable = e=>chunks.push(e.data);
      recorder.onstop = ()=>{
        const blob = new Blob(chunks,{type:mime});
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url; a.download = 'Happy_Birthday_Salwa.webm';
        document.body.appendChild(a); a.click(); a.remove();
        URL.revokeObjectURL(url);
      };

      recorder.start();
      // play audio from start and run slideshow in sync
      audio.currentTime = 0; await audio.play();
      startSlideshow();

      // stop after song duration
      setTimeout(()=>{
        recorder.stop(); audio.pause(); clearInterval(slideInterval);
      }, (audio.duration*1000)+500);
    });

    // initial show
    showSlide(0);

  </script></body>
</html>